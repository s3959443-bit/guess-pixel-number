<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guess Pixel Number</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#000;
  --blue:#00ffff;
  --orange:#ff6d00;
  --text:#ffffff;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family:'Press Start 2P', cursive;
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* FUNDO NUMÉRICO */
.numbers-bg{
  position:fixed;
  inset:0;
  z-index:-1;
}
.num{
  position:absolute;
  opacity:0.08;
  animation: float linear infinite;
}
.blue{color:var(--blue);}
.orange{color:var(--orange);}

@keyframes float{
  from{transform:translateY(110vh) rotate(var(--r));}
  to{transform:translateY(-20vh) rotate(var(--r));}
}

/* TELAS */
.screen{display:none;text-align:center;}
.active{display:block;}

/* CARD */
.card{
  background:#000;
  padding:26px;
  width:90%;
  max-width:360px;
  border-radius:18px;
  box-shadow:0 0 30px var(--blue);
  animation: pop .4s ease;
}

@keyframes pop{
  from{transform:scale(.85);opacity:0}
  to{transform:scale(1);opacity:1}
}

h1{
  font-size:16px;
  color:var(--blue);
  text-shadow:0 0 10px var(--blue),0 0 20px var(--blue);
}

p{font-size:10px;}

input{
  width:90%;
  padding:10px;
  margin:14px 0;
  border:none;
  border-radius:10px;
  text-align:center;
  font-size:11px;
}

button{
  width:95%;
  padding:12px;
  margin:6px 0;
  border:none;
  border-radius:12px;
  background:var(--orange);
  color:#000;
  font-size:10px;
  box-shadow:0 0 12px var(--orange);
}

.top-btn{
  position:fixed;
  top:12px;
  right:12px;
  width:auto;
  padding:8px;
  z-index:10;
}

.blink{animation:blink 1s infinite;}
@keyframes blink{50%{opacity:0;}}

.by{
  margin-top:8px;
  font-size:9px;
  color:var(--blue);
  opacity:.7;
}

.c-blue{color:var(--blue);}

/* CRÉDITOS */
.credits-roll{
  height:300px;
  overflow:hidden;
  position:relative;
}

.credits-content{
  position:absolute;
  width:100%;
  animation: rollCredits 18s linear infinite;
}

@keyframes rollCredits{
  from{ transform: translateY(100%); }
  to{ transform: translateY(-160%); }
}

.robot{
  display:inline-block;
  animation: robotPulse 1.4s ease-in-out infinite alternate;
}

@keyframes robotPulse{
  from{
    transform: scale(1);
    text-shadow:0 0 6px var(--blue);
  }
  to{
    transform: scale(1.15);
    text-shadow:0 0 14px var(--blue),0 0 28px var(--blue);
  }
}

.thanks{
  margin-top:30px;
  font-size:10px;
  color:var(--orange);
  animation: blink 1.2s infinite;
}
</style>
</head>

<body>

<div class="numbers-bg" id="bg"></div>

<button class="top-btn" onclick="toggleSound()"></button>

<!-- START -->
<div id="start" class="screen active card">
  <h1>GUESS PIXEL NUMBER</h1>
  <p class="blink">PRESS START</p>
  <p>BEST: <span id="best">-</span></p>
  <button onclick="startGame()">START</button>
  <button onclick="openCredits()">CREDITS</button>
  <p class="by">By:El gato mexicano</p>
</div>

<!-- GAME -->
<div id="game" class="screen card">
  <h1>GUESS</h1>
  <p>NUMERO DE 1 A 10</p>
  <input type="number" id="palpite">
  <button onclick="verificar()">TENTAR</button>
  <p id="msg"></p>
  <p id="cont">TENTATIVAS: 0</p>
</div>

<!-- WIN -->
<div id="win" class="screen card">
  <h1>YOU WIN</h1>
  <p id="winMsg"></p>
  <button onclick="restart()">RESTART</button>
</div>

<!-- CREDITS -->
<div id="credits" class="screen card credits-roll">
  <div class="credits-content">
    <h1>CREDITS</h1>
    <p>By: El gato mexicano</p>
    <p>Contribuidor: <span class="c-blue robot">Gideon </span></p>
    <p>Ideia: Samuel</p>
    <p class="thanks">Obrigado por jogar</p>
  </div>
  <button onclick="backToStart()">BACK</button>
</div>

<script>
/* FUNDO */
const bg=document.getElementById("bg");
for(let i=0;i<40;i++){
  const n=document.createElement("span");
  n.className="num "+(Math.random()>0.5?"blue":"orange");
  n.textContent=Math.floor(Math.random()*10);
  n.style.left=Math.random()*100+"vw";
  n.style.fontSize=40+Math.random()*90+"px";
  n.style.animationDuration=12+Math.random()*22+"s";
  n.style.setProperty("--r",Math.random()*360+"deg");
  bg.appendChild(n);
}

/* AUDIO */
let ctx, sound=true, music, creditsMusic;

function toggleSound(){
  sound=!sound;
  document.querySelector(".top-btn").textContent=sound?"":"";
  clearInterval(music);
  clearInterval(creditsMusic);
  music=null;
  creditsMusic=null;
}

/*  MÚSICA PRINCIPAL */
function startMusic(){
  if(music || !sound) return;
  if(!ctx) ctx=new (window.AudioContext||window.webkitAudioContext)();

  const melody=[262,330,392,494,523,494,392,330];
  let note=0, beat=0;

  music=setInterval(()=>{
    const osc=ctx.createOscillator();
    const g=ctx.createGain();
    osc.type="sawtooth";
    osc.frequency.value=melody[note];
    g.gain.value=0.045;
    osc.connect(g); g.connect(ctx.destination);
    osc.start(); osc.stop(ctx.currentTime+0.18);
    note=(note+1)%melody.length;

    const noise=ctx.createBufferSource();
    const buffer=ctx.createBuffer(1,ctx.sampleRate*0.03,ctx.sampleRate);
    const data=buffer.getChannelData(0);
    for(let i=0;i<data.length;i++) data[i]=Math.random()*2-1;
    noise.buffer=buffer;
    const hg=ctx.createGain();
    hg.gain.value=0.025;
    noise.connect(hg); hg.connect(ctx.destination);
    noise.start(); noise.stop(ctx.currentTime+0.03);

    if(beat===0||beat===1){
      const kick=ctx.createOscillator();
      const kg=ctx.createGain();
      kick.type="sine";
      kick.frequency.setValueAtTime(120,ctx.currentTime);
      kick.frequency.exponentialRampToValueAtTime(50,ctx.currentTime+0.15);
      kg.gain.setValueAtTime(0.15,ctx.currentTime);
      kg.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+0.15);
      kick.connect(kg); kg.connect(ctx.destination);
      kick.start(); kick.stop(ctx.currentTime+0.15);
    }
    beat=(beat+1)%4;
  },230);
}

/*  MÚSICA DOS CRÉDITOS COM PEDAL (SUSTAIN) */
function startCreditsMusic(){
  if(creditsMusic || !sound) return;
  if(!ctx) ctx=new (window.AudioContext||window.webkitAudioContext)();

  const notes=[
    740,554,740,554,740,554,740,554,740,554,740,554,
    494,440,554,
    null,
    440,494,659,622,698,740,554,494
  ];

  let i=0;

  creditsMusic=setInterval(()=>{
    const freq=notes[i];

    if(freq){
      const osc=ctx.createOscillator();
      const g=ctx.createGain();

      osc.type="triangle"; // piano
      osc.frequency.value=freq;

      //  PEDAL: ataque + sustain + release longo
      g.gain.setValueAtTime(0,ctx.currentTime);
      g.gain.linearRampToValueAtTime(0.09,ctx.currentTime+0.05);
      g.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+1.6);

      osc.connect(g);
      g.connect(ctx.destination);

      osc.start();
      osc.stop(ctx.currentTime+1.6); // sustain longo
    }

    i=(i+1)%notes.length;
  },520); // tempo de créditos mais emocional
}

function stopCreditsMusic(){
  clearInterval(creditsMusic);
  creditsMusic=null;
}

/* JOGO */
let numero,tentativas;
let record=localStorage.getItem("best")||"-";
best.innerText=record;

function startGame(){
  startMusic();
  numero=Math.floor(Math.random()*10)+1;
  tentativas=0;
  cont.innerText="TENTATIVAS: 0";
  msg.innerText="";
  start.classList.remove("active");
  game.classList.add("active");
}

function verificar(){
  const p=Number(palpite.value);
  tentativas++;
  cont.innerText="TENTATIVAS: "+tentativas;

  if(p===numero){
    clearInterval(music);
    music=null;

    if(record==="-"||tentativas<record){
      record=tentativas;
      localStorage.setItem("best",record);
      best.innerText=record;
    }

    game.classList.remove("active");
    win.classList.add("active");
    winMsg.innerText="ACERTOU EM "+tentativas;
  }else{
    msg.innerText=p>numero?"MUITO ALTO":"MUITO BAIXO";
  }
}

function restart(){
  win.classList.remove("active");
  start.classList.add("active");
}

function openCredits(){
  clearInterval(music);
  music=null;
  startCreditsMusic();
  start.classList.remove("active");
  credits.classList.add("active");
}

function backToStart(){
  stopCreditsMusic();
  credits.classList.remove("active");
  start.classList.add("active");
}
</script>

</body>
</html>